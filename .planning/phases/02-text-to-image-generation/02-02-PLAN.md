---
phase: 02-text-to-image-generation
plan: 02
type: execute
wave: 2
depends_on:
  - 02-01
files_modified:
  - src/components/filter-controls.tsx
  - src/app/globals.css
autonomous: true
requirements:
  - FILT-01
  - FILT-02
  - FILT-03
  - UX-06

must_haves:
  truths:
    - "User can select from 8 aspect ratio options via pill buttons with shape indicators"
    - "Aspect ratio pills scroll horizontally on mobile (<768px) without visible scrollbar"
    - "Aspect ratio pills wrap into rows on desktop (>=768px)"
    - "1:1 is selected by default and visually highlighted with green accent"
    - "User can select resolution from 1K, 2K, or 4K pill buttons"
    - "Cost text shows '$0.13 per image' for 1K/2K and '$0.24 per image' for 4K"
    - "When 4K is selected, an inline warning appears: '4K may take longer (up to 2 min)'"
  artifacts:
    - path: "src/components/filter-controls.tsx"
      provides: "Aspect ratio selector, resolution selector, cost indicator, and 4K warning"
      exports: ["FilterControls"]
    - path: "src/app/globals.css"
      provides: "scrollbar-hide Tailwind utility for horizontal scroll without scrollbar"
      contains: "scrollbar-hide"
  key_links:
    - from: "src/components/filter-controls.tsx"
      to: "src/lib/constants.ts"
      via: "imports ASPECT_RATIOS and RESOLUTIONS arrays"
      pattern: "import.*ASPECT_RATIOS.*RESOLUTIONS.*constants"
    - from: "src/app/page.tsx"
      to: "src/components/filter-controls.tsx"
      via: "component import already wired in 02-01"
      pattern: "import.*FilterControls"
---

<objective>
Create the filter controls component with aspect ratio pills (8 options with shape indicators, horizontally scrollable on mobile), resolution pills (3 options), per-image cost indicator, and 4K timeout warning. Replaces the placeholder FilterControls from plan 02-01.

Purpose: Users need to control the aspect ratio and resolution of generated images before hitting Generate. Cost and warning indicators set expectations for pricing and wait times.

Output: Fully functional FilterControls component rendering aspect ratio and resolution selectors with cost/warning text.
</objective>

<execution_context>
@/Users/nusretozturk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/nusretozturk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-text-to-image-generation/02-CONTEXT.md
@.planning/phases/02-text-to-image-generation/02-RESEARCH.md
@.planning/phases/02-text-to-image-generation/02-01-SUMMARY.md

# Source files from 02-01:
@src/lib/constants.ts
@src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add scrollbar-hide utility and create FilterControls component</name>
  <files>src/app/globals.css, src/components/filter-controls.tsx</files>
  <action>
**Update `src/app/globals.css`:**
Add the Tailwind v4 `@utility` directive for scrollbar-hide (after existing imports/utilities):
```css
@utility scrollbar-hide {
  scrollbar-width: none;
  &::-webkit-scrollbar {
    display: none;
  }
}
```
This hides the scrollbar for the horizontally scrollable aspect ratio pills on mobile. Do NOT remove any existing content in globals.css -- only append this utility.

**Replace the placeholder `src/components/filter-controls.tsx`** with the full implementation:

- `"use client"` directive
- Import `ASPECT_RATIOS`, `RESOLUTIONS` from `@/lib/constants`
- Import types `AspectRatio`, `Resolution` from `@/lib/constants`
- Props interface:
  ```typescript
  interface FilterControlsProps {
    aspectRatio: AspectRatio;
    onAspectRatioChange: (value: AspectRatio) => void;
    resolution: Resolution;
    onResolutionChange: (value: Resolution) => void;
  }
  ```
- Named export `FilterControls`

**Aspect Ratio section:**
- Label: "Aspect Ratio" in small semibold text
- Container: `flex gap-2 overflow-x-auto scrollbar-hide pb-1 md:flex-wrap md:overflow-x-visible`
  - `overflow-x-auto` + `scrollbar-hide`: horizontally scrollable on mobile without visible scrollbar
  - `md:flex-wrap md:overflow-x-visible`: wraps into rows on desktop
  - `pb-1`: small bottom padding to prevent clipping of focus rings during scroll
- Each pill button (`flex-shrink-0` to prevent compression during scroll):
  - Shape indicator: `<span>` with `inline-block border border-current rounded-sm` and computed inline styles:
    - `width: ${10 * ratio.widthFactor}px`
    - `height: ${10 * ratio.heightFactor}px`
    - (Uses 10px base, not 12px -- slightly more compact for mobile)
  - Label text: `ratio.label` (e.g., "16:9")
  - Selected state: `border-green-600 bg-green-50 text-green-800`
  - Unselected state: `border-gray-200 bg-white text-gray-600 hover:border-gray-300`
  - Rounded pill: `rounded-full`
  - Transition: `transition-colors`

**Resolution section:**
- Label: "Resolution" in small semibold text
- Container: `flex gap-2` (only 3 items, no scroll needed)
- Each pill button:
  - Same selected/unselected styling as aspect ratio pills
  - Shows resolution label (1K, 2K, 4K)
- Cost indicator below pills:
  - `<p>` with `mt-1.5 text-xs text-gray-400`
  - Shows cost: `"$0.24 per image"` when 4K selected, `"$0.13 per image"` otherwise
  - When 4K selected, append inline warning in amber: `<span className="ml-2 text-amber-500">4K may take longer (up to 2 min)</span>`
  - Per context: cost text uses smaller, secondary typography -- informative but not alarming
  - Per context: no modal or toast -- everything inline

**Key details from user decisions (Claude's Discretion in CONTEXT.md):**
- 1:1 selected by default, clearly highlighted (default value comes from page.tsx state init)
- Each pill shows the ratio text with a small shape preview
- Cost text uses smaller secondary typography
- No modal or toast -- everything inline and non-disruptive
  </action>
  <verify>
1. Run `npm run build` -- no TypeScript errors
2. Visually verify in browser at mobile width: aspect ratio pills should scroll horizontally, no visible scrollbar
3. Visually verify at desktop width (>=768px): pills should wrap into rows
4. Click each aspect ratio pill -- it should highlight with green accent
5. Click each resolution pill -- cost text should update (1K/2K show $0.13, 4K shows $0.24 + warning)
  </verify>
  <done>FilterControls renders 8 aspect ratio pills with shape indicators (scrollable on mobile, wrapped on desktop), 3 resolution pills, cost text that updates per selection, and an inline 4K timeout warning. scrollbar-hide utility is defined in globals.css.</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. FilterControls imports ASPECT_RATIOS and RESOLUTIONS from constants
3. 8 aspect ratio pills render with computed shape indicators
4. Aspect ratio container has `overflow-x-auto scrollbar-hide` for mobile and `md:flex-wrap md:overflow-x-visible` for desktop
5. 3 resolution pills render with correct labels
6. Cost text shows correct price per resolution selection
7. 4K selection shows inline amber warning text
8. `globals.css` contains the `@utility scrollbar-hide` directive
</verification>

<success_criteria>
- All 8 aspect ratio options render as pill buttons with shape preview rectangles
- Pills scroll horizontally on mobile without a visible scrollbar
- Pills wrap on desktop
- Selected pill has green accent styling
- Resolution pills show 1K, 2K, 4K options
- Cost indicator displays correct per-image price
- 4K selection shows timeout warning inline
</success_criteria>

<output>
After completion, create `.planning/phases/02-text-to-image-generation/02-02-SUMMARY.md`
</output>

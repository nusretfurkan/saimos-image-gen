---
phase: 04-visual-identity-responsive-layout
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/app/layout.tsx
autonomous: true
requirements:
  - VIS-01
  - VIS-02

must_haves:
  truths:
    - "The page background is warm cream (not white or gray)"
    - "Headings render in Playfair Display serif typeface"
    - "Body text renders in DM Sans sans-serif typeface"
    - "Sage green utility classes (bg-sage-500, text-sage-700, etc.) are available in Tailwind"
    - "Cream utility classes (bg-cream-50, bg-cream-100, bg-cream-200) are available in Tailwind"
    - "Ink text utility classes (text-ink-900, text-ink-700, text-ink-500) are available in Tailwind"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Complete design token system via @theme directive"
      contains: "@theme"
    - path: "src/app/layout.tsx"
      provides: "Font loading via next/font/google with CSS variable output"
      contains: "Playfair_Display"
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/app/globals.css"
      via: "CSS variable bridge: next/font injects --font-playfair-display and --font-dm-sans, @theme inline maps them to --font-heading and --font-body"
      pattern: "@theme inline"
---

<objective>
Establish the complete design token system (colors, typography, shadows, radii, transitions, animations) and font loading infrastructure that all subsequent Phase 4 plans depend on.

Purpose: Every component in the app needs to reference the sage green + cream palette, the Playfair Display + DM Sans fonts, and the custom shadows/radii/transitions. This plan creates that foundation in two files so Plans 02 and 03 can apply it.

Output: A `globals.css` with a full `@theme` block defining all design tokens, and a `layout.tsx` with Google Fonts loaded via `next/font/google` and bridged to Tailwind via CSS variables.
</objective>

<execution_context>
@/Users/nusretozturk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/nusretozturk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-visual-identity-responsive-layout/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define complete design token system in globals.css</name>
  <files>src/app/globals.css</files>
  <action>
Replace the existing `globals.css` content with the full design token system. The file structure must be:

1. `@import "tailwindcss";` at the top
2. An OKLCH browser fallback: `html { background-color: #FDFAF5; }` before the theme blocks
3. `@theme inline` block bridging next/font CSS variables to Tailwind font utilities:
   - `--font-heading: var(--font-playfair-display);`
   - `--font-body: var(--font-dm-sans);`
4. `@theme` block with ALL design tokens:

**Sage green palette (OKLCH, hue 145):**
- `--color-sage-50` through `--color-sage-900` (10 levels)
- sage-50 (0.97 lightness) through sage-900 (0.28 lightness)
- Use exact values from research: oklch(0.97 0.02 145) for sage-50, oklch(0.60 0.10 145) for sage-500 (primary), oklch(0.28 0.04 145) for sage-900

**Cream palette (OKLCH, warm neutrals):**
- `--color-cream-50`: oklch(0.99 0.01 90) -- page background
- `--color-cream-100`: oklch(0.97 0.02 85) -- card/surface background
- `--color-cream-200`: oklch(0.94 0.03 80) -- elevated surface, input backgrounds

**Ink palette (text colors, warm dark tones):**
- `--color-ink-900`: oklch(0.20 0.02 260) -- primary text
- `--color-ink-700`: oklch(0.35 0.02 260) -- secondary text
- `--color-ink-500`: oklch(0.50 0.02 260) -- tertiary text, placeholders
- `--color-ink-300`: oklch(0.70 0.01 260) -- disabled text

**Semantic colors:**
- `--color-error`: oklch(0.65 0.20 25)
- `--color-error-bg`: oklch(0.95 0.03 25)
- `--color-success`: oklch(0.70 0.15 145)

**Custom shadows (warm sage-tinted, not pure black):**
- `--shadow-card`: subtle card elevation
- `--shadow-elevated`: elevated panel/hover state
- `--shadow-focus`: sage-tinted focus ring (for focus-visible states)

**Border radius (varied for visual hierarchy):**
- `--radius-sm` (0.375rem), `--radius-md` (0.5rem), `--radius-lg` (0.75rem), `--radius-xl` (1rem), `--radius-2xl` (1.25rem)

**Custom easing curves:**
- `--ease-soft`: cubic-bezier(0.25, 0.1, 0.25, 1.0) -- smooth deceleration
- `--ease-spring`: cubic-bezier(0.34, 1.56, 0.64, 1) -- slight overshoot

**Custom animations with @keyframes:**
- `--animate-fade-in`: fade-in 0.3s
- `--animate-slide-up`: slide-up 0.4s
- `--animate-scale-in`: scale-in 0.2s

5. `@layer base` block with subtle grain texture overlay for organic feel:
   - `body::before` pseudo-element with fixed positioning, pointer-events: none, opacity: 0.03
   - SVG noise data URI as background-image (fractalNoise, baseFrequency 0.65, 3 octaves)
   - z-index: 9999 so it overlays everything but does not capture events

Use the exact OKLCH values from the research document. Do NOT use hex or rgb -- OKLCH is the Tailwind v4 standard and provides perceptually uniform color interpolation.
  </action>
  <verify>
Run `npx tailwindcss --help` to confirm Tailwind is available. Then visually inspect the CSS file has:
- `@import "tailwindcss"` as first line
- `@theme inline` block with font variable mappings
- `@theme` block with all color, shadow, radius, animation tokens
- `@layer base` block with grain texture
- No `tailwind.config.js` or `tailwind.config.ts` references (Tailwind v4 uses CSS-only config)
  </verify>
  <done>globals.css contains the complete design token system with sage green (10 levels), cream (3 levels), ink (4 levels), semantic colors, custom shadows, radii, easing curves, and animations -- all in OKLCH color space via Tailwind v4 @theme directive.</done>
</task>

<task type="auto">
  <name>Task 2: Load Google Fonts and wire to Tailwind in layout.tsx</name>
  <files>src/app/layout.tsx</files>
  <action>
Modify the existing `layout.tsx` to add Google Font loading and apply base design system classes.

1. Import `Playfair_Display` and `DM_Sans` from `next/font/google`

2. Configure both fonts with CSS variable output:
   ```typescript
   const playfairDisplay = Playfair_Display({
     subsets: ['latin'],
     display: 'swap',
     variable: '--font-playfair-display',
   });

   const dmSans = DM_Sans({
     subsets: ['latin'],
     display: 'swap',
     variable: '--font-dm-sans',
   });
   ```
   Both are variable fonts -- do NOT specify individual weights (the full weight range loads automatically).

3. Apply font CSS variable classes to the `<html>` element:
   ```tsx
   <html lang="en" className={`${playfairDisplay.variable} ${dmSans.variable} antialiased`}>
   ```

4. Apply base design system classes to the `<body>` element:
   ```tsx
   <body className="font-body bg-cream-50 text-ink-900 leading-relaxed">
   ```
   - `font-body` maps to DM Sans via the @theme inline bridge
   - `bg-cream-50` sets the warm cream page background
   - `text-ink-900` sets the primary text color (warm dark, not pure black)
   - `leading-relaxed` sets comfortable line height for body text

CRITICAL: The `@theme inline` block in globals.css references `var(--font-playfair-display)` and `var(--font-dm-sans)`. These CSS variables are injected by `next/font/google` at runtime via the `variable` option. The `inline` keyword is required because the variables do not exist at Tailwind build time. Without `inline`, font utilities generate empty font-family values.

Preserve all existing layout.tsx content (metadata export, children rendering, etc.). Only add font imports, font configuration, and update the className attributes.
  </action>
  <verify>
Run `npm run build` (or `npx next build`) to confirm:
1. No TypeScript errors in layout.tsx
2. Fonts are loaded without errors
3. Build succeeds

Then run `npm run dev` and check browser DevTools:
- `<html>` element has `--font-playfair-display` and `--font-dm-sans` CSS variables
- `<body>` has `font-family` resolving to DM Sans
- Page background is warm cream (not white)
  </verify>
  <done>layout.tsx loads Playfair Display and DM Sans via next/font/google with CSS variable output. The html element injects font CSS variables. The body element uses font-body (DM Sans), bg-cream-50, and text-ink-900 as the base design system classes. Build succeeds without errors.</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm run dev` shows warm cream background (not white/gray)
3. Body text renders in DM Sans
4. Browser DevTools shows `--font-playfair-display` and `--font-dm-sans` CSS variables on `<html>`
5. Tailwind utility classes `bg-sage-500`, `text-ink-900`, `bg-cream-50`, `font-heading`, `font-body` all produce correct CSS when used in components
</verification>

<success_criteria>
The design token system is fully defined in globals.css and fonts are loaded in layout.tsx. Any component can now use sage green, cream, and ink color utilities, font-heading/font-body typography utilities, custom shadow/radius utilities, and animation utilities without any additional configuration. Build passes.
</success_criteria>

<output>
After completion, create `.planning/phases/04-visual-identity-responsive-layout/04-01-SUMMARY.md`
</output>
